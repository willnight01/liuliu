# 遛遛 - “气味”地图大作战 PRD v0.2

## 文档信息

- **文档版本**：v0.2
- **创建日期**：2025-04-15
- **最后更新**：2025-04-15
- **状态**：迭代版本

## 1. 产品概述

### 1.1 产品背景

随着城市养狗人数的增加，寻找合适的遛狗场地成为养狗人士的日常需求。v0.1版本已初步实现了场地查找和详情展示功能，但用户反馈显示，对场地数据真实性和社交互动性有更高需求。目前市场上缺乏基于真实POI数据的遛狗社交平台，用户希望在遛狗过程中获得更丰富的互动体验。

### 1.2 产品定位

"遛遛"是一款专为养狗人士设计的微信小程序，基于真实场地数据，帮助用户快速找到附近适合遛狗的场地，提供场地详细信息，并通过领地争夺、社交互动等游戏化机制，提升遛狗体验，解决"去哪遛狗"和"如何有趣地遛狗"的双重问题。

### 1.3 目标用户

- 城市养狗人士
- 需要寻找遛狗场地的宠物主人
- 对宠物社交有需求的用户
- 希望通过遛狗获得乐趣的年轻人群
- 宠物友好型商户

### 1.4 核心价值

- 帮助用户便捷地找到并了解附近的遛狗场地
- 通过游戏化机制提升遛狗的趣味性
- 促进养宠人士之间的社交互动
- 连接用户与宠物友好商户，创造共赢生态

## 2. 版本规划

v0.2版本在v0.1基础上进行迭代，重点强化以下功能：

- **真实场地数据驱动**：接入微信地点云POI数据，提供真实可靠的遛狗场地信息
- **领地争夺机制**：引入游戏化元素，增加用户粘性
- **社交互动功能**：增强用户间交流，建立宠物社交圈
- **商户联动体系**：连接用户与宠物友好商户，创造商业价值


## 3. 功能需求

### 3.1 地图功能

#### 3.1.1 功能描述

通过地图视图直观展示用户附近的遛狗场地，支持场地筛选、导航和领地争夺功能。

#### 3.1.2 详细需求

1. **地图视图**
   - 在地图上显示用户当前位置
   - 在地图上标记附近的遛狗场地（基于微信地点云POI数据）
   - 支持地图缩放和拖动
   - 显示场地领地状态（无领主/争夺中/已占领）

2. **场地标记**
   - 使用不同颜色或图标区分不同类型的场地（公园、专业遛狗场、宠物友好商场等）
   - 使用不同颜色标识场地领地状态：
     - ⚪ 白色：无领主
     - 🟡 黄色：争夺中（3人以上竞争）
     - 🔵 蓝色：已占领
   - 点击标记显示场地简要信息卡片

3. **场地信息卡片**
   - 显示场地名称、评分、距离
   - 显示场地类型和主要特点（如有围栏、免费等）
   - 显示当前领主信息（如有）
   - 显示场地热度和最佳遛狗时段
   - 提供"查看详情"按钮跳转至场地详情页

4. **筛选功能**
   - 支持按距离筛选（500m、1km、3km、5km）
   - 支持按场地类型筛选（公园、专业遛狗场、宠物友好区域等）
   - 支持按设施筛选（有围栏、有饮水处、有遮阳处等）
   - 支持按评分筛选（4分以上、3分以上等）
   - 支持按领地状态筛选（无领主/争夺中/已占领）
   - 支持按人气筛选（热门/冷门）

5. **定位功能**
   - 获取用户当前位置
   - 提供"回到我的位置"按钮
   - 支持手动输入地址定位

6. **导航功能**
   - 提供导航按钮，跳转至地图应用进行导航
   - 支持多种导航方式选择（步行、驾车、公交）

7. **领地范围显示**
   - 小型场地（如宠物店门口）：显示半径50米圆形范围
   - 大型场地（如公园）：显示按高德地图轮廓的多边形围栏

#### 3.1.3 交互流程

1. 用户打开小程序，默认进入地图页面
2. 系统获取用户位置，在地图上标记用户位置和附近遛狗场地
3. 用户可以缩放、拖动地图查看更多场地
4. 用户点击筛选按钮，设置筛选条件
5. 系统根据筛选条件更新地图上的场地标记
6. 用户点击场地标记，显示场地简要信息卡片
7. 用户点击"查看详情"，跳转至场地详情页
8. 用户点击"导航"，跳转至地图应用进行导航
9. 用户可查看场地领地状态，选择参与领地争夺

### 3.2 场地详情功能

#### 3.2.1 功能描述

提供遛狗场地的详细信息，包括基本信息、设施、评价等，帮助用户全面了解场地情况，并支持领地争夺和社交互动功能。

#### 3.2.2 详细需求

1. **场地基本信息**
   - 场地名称：场地的官方名称
   - 场地地址：详细地址信息，包括省市区街道门牌号
   - 营业时间：开放时间段，如"周一至周日 8:00-20:00"
   - 联系电话：场地管理方联系电话
   - 场地类型：如公园、专业遛狗场、宠物友好区域、宠物商店、宠物友好商场等
   - 场地面积：以平方米为单位的场地面积
   - 收费情况：免费/收费（包含具体收费标准）
   - 总体评分：基于用户评价的平均分数（1-5分）
   - 评价数量：已有用户评价的总数量
   - 场地状态：正常开放/临时关闭/维护中等
   - 场地热度：当前场地人气指数
   - 最佳遛狗时段：根据历史数据分析的最佳遛狗时间

2. **场地图片**
   - 场地全景照片：展示场地整体环境
   - 设施照片：展示场地内各类设施
   - 环境照片：展示场地周边环境
   - 用户上传照片：其他用户分享的实拍照片
   - 照片时间戳：照片拍摄或上传的时间
   - 照片描述：对照片内容的简要说明
   - 照片序号指示：如"1/5"，表明当前查看的是第几张照片
   - AR打卡墙：显示用户在此场地的AR留言和照片

3. **场地设施标签**
   - 围栏：场地是否有围栏保护，防止宠物走失
   - 饮水处：提供宠物饮水的设施
   - 洗爪设备：供宠物清洗爪子的设备
   - 宠物厕所：专门供宠物如厕的区域
   - 遮阳棚：提供遮阳避雨的区域
   - 休息座椅：供主人休息的座椅设施
   - 垃圾桶：处理宠物废弃物的垃圾桶
   - 照明设施：夜间照明设备
   - 训练器材：供宠物训练使用的器材
   - 游乐设施：供宠物玩耍的专用设施
   - 草地区域：供宠物奔跑的草坪区域
   - 沙地区域：供宠物挖掘玩耍的沙地
   - 水池区域：供宠物戏水的区域
   - 宠物用品店：售卖宠物用品的商店
   - 宠物医疗点：提供简单医疗服务的设施
   - 监控设备：安全监控摄像头
   - 紧急求助点：紧急情况下的求助设施
   - 停车场：附近的停车设施
   - 公共卫生间：供主人使用的卫生间
   - 休息区：供主人和宠物休息的区域

4. **场地详情描述**
   - 场地简介：场地的基本介绍和特色
   - 环境描述：场地环境的详细描述
   - 设施介绍：各类设施的详细介绍和使用说明
   - 使用规则：场地使用的规定和注意事项
   - 宠物要求：对进入场地的宠物的要求（如需佩戴牵引绳、携带疫苗证明等）
   - 特别提示：特殊天气或情况下的使用建议
   - 历史背景：场地的建设历史和背景故事（如有）

5. **用户评价**
   - 用户基本信息：用户名、头像
   - 评分：用户给出的1-5星评分
   - 评价内容：用户的文字评价
   - 评价时间：评价发布的时间
   - 评价标签：如"环境好"、"设施全"、"安全性高"等快速标签
   - 评价图片：用户上传的场地照片
   - 点赞数：该评价获得的点赞数量
   - 回复内容：场地管理方的回复（如有）

6. **操作功能**
   - 收藏功能：一键收藏/取消收藏场地
   - 分享功能：分享场地信息至微信好友/朋友圈/微博等
   - 导航功能：支持多种导航方式（步行/驾车/公交）
   - 报错功能：报告场地信息错误或更新
   - 预约功能：支持场地预约（如需要）
   - 反馈功能：对场地提出建议或投诉
   - 查看人气：查看场地当前人气或最近访问量
   - 打卡功能：在场地内打卡签到，获取积分
   - 领地争夺：参与场地领地争夺
   - AR留言：在场地留下AR留言或照片

7. **附近场地推荐**
   - 场地名称：推荐场地的名称
   - 场地图片：推荐场地的主图
   - 场地评分：推荐场地的用户评分
   - 场地距离：与当前场地的距离（公里）
   - 场地特色：推荐场地的主要特点
   - 适宜宠物：适合的宠物类型
   - 人气指数：场地的受欢迎程度
   - 领地状态：场地的领地争夺状态

8. **热力时间轴**
   - 展示场地分时段拥挤度（如"周六10点人狗爆满"）
   - 生成避峰攻略图："周二下午3点最适合独享本场地"
   - 显示历史打卡数据统计

#### 3.2.3 交互流程

1. 用户从地图页面点击场地标记，进入场地详情页
2. 用户可以查看场地图片、基本信息、设施标签等
3. 用户可以查看场地详情描述和用户评价
4. 用户可以收藏场地、分享场地或导航前往
5. 用户可以查看附近其他推荐场地
6. 用户可以查看场地热力时间轴，了解最佳遛狗时段
7. 用户可以参与场地领地争夺
8. 用户可以在AR打卡墙留言或查看他人留言
9. 用户点击返回按钮，返回地图页面

### 3.3 领地争夺功能

#### 3.3.1 功能描述

通过游戏化机制，让用户争夺场地领地权，增加用户粘性和互动性。

#### 3.3.2 详细需求

1. **领地数据来源**
   - 基础数据：接入微信地点云（Place Cloud）中的「宠物友好场所」POI数据
   - 筛选标准：带「宠物公园」「可携宠餐厅」「遛狗区」标签的地点
   - 动态扩展：用户可提交新遛狗场地（需上传3张实景图+50字描述）
   - 审核机制：AI初筛（YOLO识别遛狗设施）+人工复核

2. **领地可视化**
   - 地图显示微信原生地点卡片（带宠物爪印角标）
   - 状态标识：
     - ⚪ 白色：无领主
     - 🟡 黄色：争夺中（3人以上竞争）
     - 🔵 蓝色：已占领

3. **领地范围**
   - 精准围栏：
     - 小型场地（如宠物店门口）：半径50米圆形
     - 大型场地（如公园）：按高德地图轮廓多边形围栏

4. **积分规则**
   - 常规打卡：在场地定位打卡，获得1积分
   - 黄金时段打卡：在7-9点或18-20点打卡，需连续两天同一时段签到，获得2积分
   - 场地评价：发布100字点评+1张实拍图，获得1积分
   - 路线贡献：上传该场地至其他地图App（需截图验证），获得3积分
   - 分享给好友：分享到朋友圈或微信好友，获得1积分

5. **领主争夺机制**
   - 资格条件：
     - 必须在本场地实际完成≥2次遛狗打卡
     - 累计积分≥场地基准分（基准分=场地周均人流量×0.5）

6. **领主排行榜**
   - 显示当前场地历史领主排行
   - 显示用户拥有的所有领地
   - 显示城市领地排行榜

#### 3.3.3 交互流程

1. 用户在场地内停留，系统提示可以打卡
2. 用户完成打卡，获得相应积分
3. 用户积分达到场地基准分，可参与领地争夺
4. 用户满足积分并且成为当前最高积分，自动成为领主。
5. 系统定期结算领地归属，更新领主信息

### 3.4 社交互动功能

#### 3.4.1 功能描述


1. **宠物社交**
   - 支持创建宠物档案（品种、年龄、性格等）
   - 支持宠物间的"交友"功能
   - 推荐附近性格相似的宠物
   - 支持组织线下宠物聚会

2. **用户互动**
   - 支持用户间私信交流
   - 支持创建遛狗群组
   - 支持分享遛狗路线和经验
   - 支持点赞、评论他人内容


### 3.5 商户联动功能

#### 3.5.1 功能描述

连接用户与宠物友好商户，创造商业价值，提供更多场地资源和服务。

#### 3.5.2 详细需求

1. **领主合作计划**
   - 领主可申请成为场地「星推官」
   - 发布带商家定位的内容，按引流效果兑换积分
   - 获得商家专属优惠券

2. **线下凭证**
   - 领主到店扫码，触发AR特效（如狗粮雨动画）
   - 店员核销后双方获得双倍积分（24小时内有效）
   - 支持积分兑换商家优惠

3. **商户入驻**
   - 宠物友好商户可申请入驻平台
   - 提供商户管理后台
   - 支持发布优惠活动
   - 支持查看用户反馈和数据分析

4. **商户推广**
   - 支持商户发布宠物相关活动
   - 支持商户投放精准广告
   - 支持商户与领主合作推广
   - 提供商户排行榜和推荐

#### 3.5.3 交互流程

1. 商户通过后台申请入驻平台
2. 系统审核商户资质，通过后开通商户账号
3. 商户可发布优惠活动和宠物相关服务
4. 用户可查看商户信息和优惠活动
5. 用户到店消费，可获得积分奖励
6. 领主可与商户合作，成为场地星推官
7. 领主发布带商家定位的内容，获得额外积分

## 4. 非功能需求

### 4.1 性能需求

- 地图加载时间不超过3秒
- 场地标记显示不超过1秒
- 场地详情页加载时间不超过2秒
- AR功能响应时间不超过1.5秒
- 领地争夺数据同步延迟不超过5秒

### 4.2 安全需求

- 获取用户位置信息需经用户授权
- 用户数据加密存储
- 防刷分机制，避免恶意刷积分
- 用户社交信息保密，仅对授权用户可见
- 商户信息真实性验证

### 4.3 兼容性需求

- 支持微信最新版本及向前兼容两个版本
- 适配主流机型屏幕尺寸
- AR功能兼容iOS 11.0+和Android 8.0+系统
- 支持低网速环境下的基础功能使用

## 5. 界面原型

### 5.1 地图页面

地图页面将包含以下元素：
- 顶部搜索栏
- 中间地图区域（显示场地标记和领地状态）
- 右下角定位按钮
- 底部筛选条件栏
- 底部导航栏
- 领地状态图例

### 5.2 场地详情页面

场地详情页面将包含以下元素：
- 顶部图片轮播
- 场地基本信息区
- 场地设施标签区
- 操作按钮区（导航、分享、打卡）
- 场地详情描述区
- 用户评价区
- 热力时间轴区
- 领地争夺区
- AR打卡墙入口
- 附近场地推荐区

### 5.3 领地争夺页面

领地争夺页面将包含以下元素：
- 当前领主信息
- 争夺者排行榜
- 用户积分信息
- 积分获取规则说明
- 争夺按钮
- 防御设施设置区

### 5.4 AR打卡墙页面

AR打卡墙页面将包含以下元素：
- AR相机取景框
- 历史留言展示区
- 留言编辑区
- AR特效选择区
- 分享按钮

## 6. 技术实现

### 6.1 技术架构

- 前端：微信小程序框架
- UI框架：Tailwind CSS
- 地图API：腾讯地图API + 高德地图围栏API
- AR技术：微信AR SDK
- 数据存储：微信云开发
- 算法支持：微信AI能力

### 6.2 数据结构

#### 场地数据结构
```json
{
  "id": "string",                 // 场地唯一标识
  "name": "string",               // 场地名称
  "address": "string",            // 详细地址
  "location": {
    "latitude": "number",         // 纬度
    "longitude": "number"         // 经度
  },
  "type": "string",               // 场地类型
  "rating": "number",             // 评分(1-5)
  "ratingCount": "number",        // 评价数量
  "openingHours": {
    "monday": "string",           // 周一营业时间
    "tuesday": "string",          // 周二营业时间
    "wednesday": "string",        // 周三营业时间
    "thursday": "string",         // 周四营业时间
    "friday": "string",           // 周五营业时间
    "saturday": "string",         // 周六营业时间
    "sunday": "string"            // 周日营业时间
  },
  "phone": "string",              // 联系电话
  "status": "string",             // 场地状态
  "fee": {
    "isFree": "boolean",          // 是否免费
    "priceInfo": "string"         // 收费标准
  },
  "facilities": [
    {
      "name": "string",           // 设施名称（如"围栏"、"饮水处"等）
      "isAvailable": "boolean",   // 是否可用
      "description": "string",    // 设施描述（如"2米高围栏"、"自动饮水器"等）
      "icon": "string"            // 设施图标URL
    }
  ],
  "description": {
    "brief": "string",            // 简介
    "environment": "string",      // 环境描述
    "rules": "string",            // 使用规则
    "petRequirements": "string",  // 宠物要求
    "specialNotes": "string"      // 特别提示
  },
  "images": [
    {
      "url": "string",            // 图片URL
      "type": "string",           // 图片类型(全景/设施/环境等)
      "description": "string",    // 图片描述
      "timestamp": "date